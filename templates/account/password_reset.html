{% extends 'base.html' %}
{% load static %}
{% block title %}
Dat lai mat khau - VN Travel
{% endblock %}

{% block body_class %}auth-page{% endblock %}

{% block content %}
<!-- Threeland Hero - Full Screen Authentication -->
<div class="threeland-hero" style="min-height: 100vh; display: flex; align-items: center; position: relative;">
  <div class="hero-background-image" style="background-image: url('https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?w=1920&q=80'); position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center;"></div>
  <div class="hero-overlay" style="z-index: 1; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4);"></div>
  
  <div style="position: relative; z-index: 10; width: 100%;">
    <div class="container">
      <div class="row justify-content-center align-items-center">
        <div class="col-lg-5 col-md-7 col-sm-10">
          <!-- Title -->
          <div class="text-center mb-4">
            <p class="hero-subtitle text-white-50 text-uppercase ls-1 mb-2">Account Recovery</p>
            <h1 class="hero-main-title text-white mb-0" style="font-size: 2.5rem;">Reset Password</h1>
          </div>

          <!-- Password Reset Card -->
          <div class="card shadow-lg border-0 rounded-lg" style="background: rgba(255,255,255,0.98); backdrop-filter: blur(10px);">
            <div class="card-body p-4 p-md-5">
              {% if form.non_field_errors %}
              <div class="alert alert-danger" role="alert">
                {{ form.non_field_errors|join:", " }}
              </div>
              {% endif %}

              <form method="post" action="{% url 'account_reset_password' %}" novalidate>
                {% csrf_token %}
                <div class="mb-4">
                  <label for="id_email" class="form-label fw-semibold text-dark">Email đăng ký</label>
                  <div class="input-group input-group-lg input-group-soft shadow-none">
                    <span class="input-group-text bg-white border-end-0 text-muted ps-3"><i class="fas fa-envelope"></i></span>
                    <input type="email" name="email" class="form-control border-start-0 ps-0" id="id_email" placeholder="name@example.com" required autofocus />
                  </div>
                  {% if form.email.errors %}
                  <div class="form-text text-danger mt-2">{{ form.email.errors|join:", " }}</div>
                  {% else %}
                  <div class="form-text text-muted mt-2">Chúng tôi sẽ gửi liên kết đặt lại trong vài giây.</div>
                  {% endif %}
                </div>

                {% if redirect_field_value %}
                <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
                {% endif %}

                <button type="submit" class="btn btn-primary btn-lg w-100 shadow-sm text-uppercase fw-bold letter-spacing-1" style="background: linear-gradient(87deg, #5e72e4 0, #825ee4 100%); border: none;">
                  <i class="fas fa-paper-plane me-2"></i> Gửi liên kết đặt lại
                </button>
              </form>

              <div class="d-flex justify-content-between align-items-center mt-4 pt-2 border-top">
                <a href="{% url 'account_login' %}" class="text-decoration-none small fw-bold text-primary"><i class="fas fa-arrow-left me-1"></i> Trở về đăng nhập</a>
                <a href="{% url 'register' %}" class="text-decoration-none small fw-bold text-dark">Chưa có tài khoản? <span class="text-primary">Đăng ký</span></a>
              </div>
            </div>
            
            <div class="card-footer bg-secondary bg-opacity-10 text-center py-3 border-0">
              <small class="text-muted">Cần trợ giúp? Liên hệ <a href="mailto:support@vntravel.local" class="text-dark fw-bold">support@vntravel.local</a></small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .gradient-pill {
    background: linear-gradient(135deg, #5b7dff 0%, #6f65f1 100%);
  }
  .input-group-soft {
    border: 1px solid #e2e8f0;
    border-radius: 12px;
    overflow: hidden;
    transition: box-shadow 0.2s ease, border-color 0.2s ease;
  }
  .input-group-soft:focus-within {
    border-color: #667eea;
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.18);
  }
</style>
{% endblock %}
