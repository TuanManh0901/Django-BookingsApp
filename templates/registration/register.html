{% extends 'base.html' %}
{% load static %}
{% block title %}
ƒêƒÉng k√Ω t√†i kho·∫£n - VN Travel
{% endblock %}

{% block body_class %}auth-page{% endblock %}

{% block content %}
<!-- Threeland Hero - Full Screen Authentication -->
<div class="threeland-hero" style="min-height: 100vh;">
  <div class="hero-background-image" style="background-image: url('https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?w=1920&q=80');"></div>
  <div class="hero-overlay"></div>
  
  <div class="hero-main-content">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-6 col-md-8">
          <!-- Hero Title -->
          <div class="text-center mb-4">
            <p class="hero-subtitle">Welcome</p>
            <h1 class="hero-main-title mb-4">Register</h1>
          </div>
          
          <!-- Register Card -->
          <div class="card bg-white shadow border-0">
            <div class="card-body px-lg-5 py-lg-4">
              {% if form.errors %}
              <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <strong>C√≥ l·ªói x·∫£y ra!</strong>
                {% for field, errors in form.errors.items %}
                {% for error in errors %}
                <br />{{ error }}
                {% endfor %}
                {% endfor %}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
              </div>
              {% endif %}
              <form method="post" action="{% url 'register' %}" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="form-group mb-3">
                  <label class="form-control-label" for="id_username">
                    <i class="fas fa-user"></i> T√™n ƒëƒÉng nh·∫≠p <span class="text-danger">*</span>
                  </label>
                  <div class="input-group input-group-alternative">
                    <div class="input-group-prepend">
                      <span class="input-group-text"><i class="fas fa-user"></i></span>
                    </div>
                    {{ form.username }}
                  </div>
                  <small class="form-text text-muted">T·ªëi ƒëa 150 k√Ω t·ª±. Ch·ªâ s·ª≠ d·ª•ng ch·ªØ c√°i, s·ªë v√† @/./+/-/_</small>
                </div>
                <div class="form-group mb-3">
                  <label class="form-control-label" for="id_email">
                    <i class="fas fa-envelope"></i> Email <span class="text-danger">*</span>
                  </label>
                  <div class="input-group input-group-alternative">
                    <div class="input-group-prepend">
                      <span class="input-group-text"><i class="fas fa-envelope"></i></span>
                    </div>
                    {{ form.email }}
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group mb-3">
                      <label class="form-control-label" for="id_first_name">
                        <i class="fas fa-id-card"></i> T√™n
                      </label>
                      <div class="input-group input-group-alternative">
                        <div class="input-group-prepend">
                          <span class="input-group-text"><i class="fas fa-id-card"></i></span>
                        </div>
                        {{ form.first_name }}
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group mb-3">
                      <label class="form-control-label" for="id_last_name">
                        <i class="fas fa-id-card-alt"></i> H·ªç
                      </label>
                      <div class="input-group input-group-alternative">
                        <div class="input-group-prepend">
                          <span class="input-group-text"><i class="fas fa-id-card-alt"></i></span>
                        </div>
                        {{ form.last_name }}
                      </div>
                    </div>
                  </div>
                </div>
                <div class="form-group mb-3">
                  <label class="form-control-label" for="id_password1">
                    <i class="fas fa-lock"></i> M·∫≠t kh·∫©u <span class="text-danger">*</span>
                  </label>
                  <div class="input-group input-group-alternative" style="position: relative;">
                    <div class="input-group-prepend">
                      <span class="input-group-text"><i class="fas fa-lock"></i></span>
                    </div>
                    {{ form.password1 }}
                    <button type="button" class="toggle-password" data-target="id_password1" style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); border: none; background: none; cursor: pointer; color: #1e293b; padding: 0; width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; font-size: 22px; z-index: 10;">
                      üôà
                    </button>
                  </div>
                  <div class="password-requirements">
                    <small>
                      ‚Ä¢ T·ªëi thi·ªÉu 8 k√Ω t·ª±<br>
                      ‚Ä¢ Kh√¥ng ƒë∆∞·ª£c gi·ªëng th√¥ng tin c√° nh√¢n<br>
                      ‚Ä¢ Kh√¥ng ƒë∆∞·ª£c to√†n b·ªô l√† s·ªë
                    </small>
                  </div>
                </div>
                <div class="form-group mb-4">
                  <label class="form-control-label" for="id_password2">
                    <i class="fas fa-lock"></i> X√°c nh·∫≠n m·∫≠t kh·∫©u <span class="text-danger">*</span>
                  </label>
                  <div class="input-group input-group-alternative" style="position: relative;">
                    <div class="input-group-prepend">
                      <span class="input-group-text"><i class="fas fa-lock"></i></span>
                    </div>
                    {{ form.password2 }}
                    <button type="button" class="toggle-password" data-target="id_password2" style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); border: none; background: none; cursor: pointer; color: #1e293b; padding: 0; width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; font-size: 22px; z-index: 10;">
                      üôà
                    </button>
                  </div>
                </div>
                <div class="text-center">
                  <button type="submit" class="btn btn-primary btn-lg w-100">
                    <i class="fas fa-user-plus"></i> ƒêƒÉng k√Ω
                  </button>
                </div>
              </form>
            </div>
            <div class="card-footer bg-transparent">
              <div class="text-center">
                <small>ƒê√£ c√≥ t√†i kho·∫£n? <a href="{% url 'account_login' %}" class="text-primary"><strong>ƒêƒÉng nh·∫≠p ngay</strong></a></small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<style>
  .input-group-alternative {
    box-shadow: 0 1px 3px rgba(50, 50, 93, 0.15), 0 1px 0 rgba(0, 0, 0, 0.02);
    border: 0;
    transition: box-shadow 0.15s ease;
  }

  .input-group-alternative .form-control {
    border: 0;
  }

  .input-group-alternative .input-group-text {
    border: 0;
    background-color: transparent;
    color: #8898aa;
  }

  .input-group-alternative:focus-within {
    box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);
  }

  .form-control:focus {
    box-shadow: none;
  }
  
  /* Clean up Django help text */
  .form-text, .helptext {
    display: block;
    margin-top: 0.5rem;
    font-size: 0.875rem;
    color: #6c757d;
    line-height: 1.5;
  }
  
  .helptext ul {
    margin: 0.5rem 0 0 0;
    padding-left: 1.5rem;
    list-style: none;
  }
  
  .helptext li {
    margin-bottom: 0.25rem;
    position: relative;
    padding-left: 0;
  }
  
  .helptext li:before {
    content: "‚Ä¢";
    position: absolute;
    left: -1rem;
    color: #6c757d;
  }
  
  /* Hide verbose Django password validators */
  #hint_id_password1 ul {
    display: none;
  }
  
  /* Custom password requirements */
  .password-requirements {
    background: #f8f9fa;
    padding: 0.75rem 1rem;
    border-radius: 0.375rem;
    margin-top: 0.5rem;
    font-size: 0.813rem;
    color: #6c757d;
  }
  
  .password-requirements li {
    margin-bottom: 0.25rem;
  }
  
  .toggle-password:hover {
    opacity: 0.7;
  }
  
  #id_password1, #id_password2 {
    padding-right: 45px !important;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const toggleButtons = document.querySelectorAll('.toggle-password');
    
    toggleButtons.forEach(button => {
      button.addEventListener('click', function() {
        const targetId = this.getAttribute('data-target');
        const input = document.getElementById(targetId);
        
        if (input && input.type === 'password') {
          input.type = 'text';
          this.innerHTML = 'üëÅÔ∏è';
        } else if (input) {
          input.type = 'password';
          this.innerHTML = 'üôà';
        }
      });
    });
  });
</script>
{% endblock %}
